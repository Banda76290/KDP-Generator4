-- SCRIPT DE MIGRATION PRODUCTION
-- Remplace complètement la table marketplace_categories de production
-- par les données de développement
-- 
-- ⚠️  ATTENTION: Ce script supprime toutes les catégories existantes
-- ⚠️  À utiliser uniquement après sauvegarde de la production
-- 
-- Instructions:
-- 1. Faire une sauvegarde complète de la base de production
-- 2. Exécuter ce script sur la base de production
-- 3. Vérifier le bon fonctionnement après migration

-- Étape 1: Vider complètement la table de production
TRUNCATE TABLE marketplace_categories RESTART IDENTITY CASCADE;

-- Étape 2: Insérer toutes les données de développement (52 catégories)
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('GouAupNMyiJXHa2Ib8liz', 'amazon.co.uk', 'Books > kindle_ebook > Business & Finance > Entrepreneurs > Startups > Fundraising', 'Fundraising', 4, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('ntUPrak_tMUI4RiAP7W5L', 'amazon.co.uk', 'Books > kindle_ebook > Children & Teen > Children''s Books > Picture Books > Animals', 'Animals', 4, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('R_s6PQlMM8ufqtO7OXIR0', 'amazon.co.uk', 'Books > kindle_ebook > Guides & Advice > Wellness > Meditation > Mindfulness > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('MUw0zd2QM8A8JDDcmIl5O', 'amazon.co.uk', 'Books > kindle_ebook > Literature & Fiction > Fantasy > High Fantasy > Epic > Medieval', 'Medieval', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('7lfu130qId5roaWZatcvr', 'amazon.co.uk', 'Books > kindle_ebook > Science, Technology > Computers & Technology > Programming > Python > Data Science', 'Data Science', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('yqxMRu52G8O_-x1Jg49GO', 'amazon.co.uk', 'Books > print_kdp_paperback > Business & Finance > Entrepreneurs > Startups > Fundraising', 'Fundraising', 4, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('kC6CWuLljJ453uCwV-yNk', 'amazon.co.uk', 'Books > print_kdp_paperback > Children & Teen > Children''s Books > Picture Books > Animals', 'Animals', 4, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('CXDmGPOeweR9wc-VmuHjM', 'amazon.co.uk', 'Books > print_kdp_paperback > Guides & Advice > Wellness > Meditation > Mindfulness > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('u8xdokKPWnL32qLRaDMEs', 'amazon.co.uk', 'Books > print_kdp_paperback > Literature & Fiction > Fantasy > High Fantasy > Epic > Medieval', 'Medieval', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('DkKTPySxswCaF3pMgjR3g', 'amazon.co.uk', 'Books > print_kdp_paperback > Science, Technology > Computers & Technology > Programming > Python > Data Science', 'Data Science', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('hpP8kMTVX16gpPstAveFH', 'amazon.de', 'Books > kindle_ebook > Bücher & Literatur > Fantasy > High Fantasy > Episch > Mittelalterlich', 'Mittelalterlich', 5, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('fraya0UbwCC6I077DlPFB', 'amazon.de', 'Books > kindle_ebook > Kinder & Jugendliche > Kinderbücher > Bilderbücher > Tiere', 'Tiere', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('EckpuV6sHShDAOAVIchEB', 'amazon.de', 'Books > kindle_ebook > Ratgeber & Tipps > Wellness > Meditation > Achtsamkeit > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('yZN15ouF8fS2DWvUs5OcT', 'amazon.de', 'Books > kindle_ebook > Wirtschaft & Finanzen > Unternehmertum > Startups > Finanzierung', 'Finanzierung', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('Wg-4Q0EgAauaqKpFltRC4', 'amazon.de', 'Books > kindle_ebook > Wissenschaft > Computer & Technik > Programmierung > Python > Datenwissenschaft', 'Datenwissenschaft', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('lB4ojniPDabKXGrPe0L9-', 'amazon.de', 'Books > print_kdp_paperback > Bücher & Literatur > Fantasy > High Fantasy > Episch > Mittelalterlich', 'Mittelalterlich', 5, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('Z0st_SgnX-xTbREf3c4MN', 'amazon.de', 'Books > print_kdp_paperback > Kinder & Jugendliche > Kinderbücher > Bilderbücher > Tiere', 'Tiere', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('SyM8ujLRUpDUex6pKVgfs', 'amazon.de', 'Books > print_kdp_paperback > Ratgeber & Tipps > Wellness > Meditation > Achtsamkeit > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('VWPdkEkWIukwAtAV0fBEr', 'amazon.de', 'Books > print_kdp_paperback > Wirtschaft & Finanzen > Unternehmertum > Startups > Finanzierung', 'Finanzierung', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('DkrwgrvH47Zfi95pZqj5l', 'amazon.de', 'Books > print_kdp_paperback > Wissenschaft > Computer & Technik > Programmierung > Python > Datenwissenschaft', 'Datenwissenschaft', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('ecb1mma1Ja2dsJAlzOtwV', 'amazon.es', 'Books > kindle_ebook > Ciencia, Tecnología > Informática > Programación > Python > Ciencia de datos', 'Ciencia de datos', 5, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('GGFG0OFhEH7q7LEPt_UNQ', 'amazon.es', 'Books > kindle_ebook > Guías y Consejos > Bienestar > Meditación > Atención plena > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('4HR_JBBbWOLKxm2hZbrSl', 'amazon.es', 'Books > kindle_ebook > Infantil y Juvenil > Libros infantiles > Libros ilustrados > Animales', 'Animales', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('5nxesHgW47p99duQRFsCj', 'amazon.es', 'Books > kindle_ebook > Libros y Literatura > Fantasía > Alta fantasía > Épica > Medieval', 'Medieval', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('M87rUVbhgfzs4sdDTmGPW', 'amazon.es', 'Books > kindle_ebook > Negocios y Finanzas > Emprendimiento > Startups > Recaudación de fondos', 'Recaudación de fondos', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('blFe-UbUIWpRRJVgNLxbR', 'amazon.es', 'Books > print_kdp_paperback > Ciencia, Tecnología > Informática > Programación > Python > Ciencia de datos', 'Ciencia de datos', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('FOYb06ttiT8XC1ZtehMJT', 'amazon.es', 'Books > print_kdp_paperback > Guías y Consejos > Bienestar > Meditación > Atención plena > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('oBzvONzRKOn3YEELR7s3i', 'amazon.es', 'Books > print_kdp_paperback > Infantil y Juvenil > Libros infantiles > Libros ilustrados > Animales', 'Animales', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('_bTvwWdqZGPJMSXN7GYxR', 'amazon.es', 'Books > print_kdp_paperback > Libros y Literatura > Fantasía > Alta fantasía > Épica > Medieval', 'Medieval', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('kbJO8POXVEIXQBdU6sUvb', 'amazon.es', 'Books > print_kdp_paperback > Negocios y Finanzas > Emprendimiento > Startups > Recaudación de fondos', 'Recaudación de fondos', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('DnYJY40MN4cdVYPHv-IyN', 'amazon.fr', 'Books > kindle_ebook > Enfants & Adolescents > Livres pour enfants > Albums illustrés > Animaux', 'Animaux', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('xyM-ndgmMhW_5_4kuaX1R', 'amazon.fr', 'Books > kindle_ebook > Entreprise & Bourse > Entrepreneuriat > Start-up > Levée de fonds', 'Levée de fonds', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('VaGyXTKcu_PEHstYGBQqL', 'amazon.fr', 'Books > kindle_ebook > Guide & Conseils > Bien-être > Méditation > Pleine conscience > Yoga > Yoga sur chaise', 'Yoga sur chaise', 6, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('MANIBwNG9FQJUl8Z-pMPR', 'amazon.fr', 'Books > kindle_ebook > Littérature & Fiction > Fantasy > High Fantasy2 > Épique > Médiéval', 'Médiéval', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('ItbBHDWGTekTohRhUyFTb', 'amazon.fr', 'Books > kindle_ebook > Littérature & Fiction > Roman > Amour > Épique > Médiéval > Tip > Top > Cool > Moule', 'Moule', 9, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('1tSfvMqymO_irY06-4YAc', 'amazon.fr', 'Books > kindle_ebook > Sciences, Techniques & Médecine > Informatique > Programmation > Python > Data Science', 'Data Science', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('4atmHuOOXS2ZLP7kUVics', 'amazon.fr', 'Books > print_kdp_paperback > Enfants & Adolescents > Livres pour enfants > Albums illustrés > Animaux', 'Animaux', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('XLsQYj8F2-mHwlts1PFyv', 'amazon.fr', 'Books > print_kdp_paperback > Entreprise & Bourse > Entrepreneuriat > Start-up > Levée de fonds', 'Levée de fonds', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('7HsYokW3RdmtHj9lQvhWq', 'amazon.fr', 'Books > print_kdp_paperback > Guide & Conseils > Bien-être > Méditation > Pleine conscience > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('QuAGk6w_nadvTFRTIdUSb', 'amazon.fr', 'Books > print_kdp_paperback > Littérature & Fiction > Fantasy > High Fantasy2 > Épique > Médiéval', 'Médiéval', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('HoqFWDLCfVOqeGLz6D2vU', 'amazon.fr', 'Books > print_kdp_paperback > Sciences, Techniques & Médecine > Informatique > Programmation > Python > Data Science', 'Data Science', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('vLWWnVBgahF61oOqmPgQn', 'amazon.it', 'Books > kindle_ebook > Affari e Finanza > Imprenditoria > Startup > Raccolta fondi', 'Raccolta fondi', 4, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('K5kJOZh_zFCUgOa6E83Jl', 'amazon.it', 'Books > kindle_ebook > Informatica, Web e Digital Media > Informatica > Programmazione > Python > Scienza dei dati', 'Scienza dei dati', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('7a7LKUU8JzCFiIJPt6R36', 'amazon.it', 'Books > kindle_ebook > Libri e Letteratura > Fantasy > High Fantasy > Epico > Medievale', 'Medievale', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('C8DnVSO4EWOUzOikmvj2W', 'amazon.it', 'Books > kindle_ebook > Libri per bambini e ragazzi > Libri per bambini > Libri illustrati > Animali', 'Animali', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('8CeBx2rkd6J_Ye4UOHwxH', 'amazon.it', 'Books > kindle_ebook > Stile di vita > Benessere > Meditazione > Consapevolezza > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('zEgCmxzELfH9hvAhRWDQS', 'amazon.it', 'Books > print_kdp_paperback > Affari e Finanza > Imprenditoria > Startup > Raccolta fondi', 'Raccolta fondi', 4, true, '2025-08-01 06:37:44.143', '2025-08-01 06:37:44.143');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('g9nDNZzOO2CrHc-ACczPc', 'amazon.it', 'Books > print_kdp_paperback > Informatica, Web e Digital Media > Informatica > Programmazione > Python > Scienza dei dati', 'Scienza dei dati', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('Ib_MBRgVNJ8D-9xLJJJz7', 'amazon.it', 'Books > print_kdp_paperback > Libri e Letteratura > Fantasy > High Fantasy > Epico > Medievale', 'Medievale', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('EaXq7fMBOzYJTwFHhKD3P', 'amazon.it', 'Books > print_kdp_paperback > Libri per bambini e ragazzi > Libri per bambini > Libri illustrati > Animali', 'Animali', 4, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');
INSERT INTO marketplace_categories (id, marketplace, category_path, display_name, level, is_selectable, created_at, updated_at) VALUES ('dCwKmjrEBXJUww45Yh9sR', 'amazon.it', 'Books > print_kdp_paperback > Stile di vita > Benessere > Meditazione > Consapevolezza > Yoga', 'Yoga', 5, true, '2025-08-01 06:37:44.144', '2025-08-01 06:37:44.144');

-- Étape 3: Vérification du résultat
-- Cette requête doit retourner 52 pour confirmer la migration
SELECT COUNT(*) as total_categories_migrated FROM marketplace_categories;

-- Étape 4: Vérification par marketplace
SELECT marketplace, COUNT(*) as count_per_marketplace 
FROM marketplace_categories 
GROUP BY marketplace 
ORDER BY marketplace;

-- RÉSULTAT ATTENDU:
-- amazon.co.uk: 10 catégories
-- amazon.de: 10 catégories  
-- amazon.es: 10 catégories
-- amazon.fr: 12 catégories
-- amazon.it: 10 catégories
-- TOTAL: 52 catégories